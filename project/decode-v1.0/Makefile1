#.SUFFIXES: .cpp .o
#源文件和.o文件的依赖关系
CC=mips-linux-gnu-gcc 

#把所有的目录做成变量，方便修改和移植
BIN = ./bin
SRC = ./src
INC += ./include
OBJ = ./obj
LIB = ./lib

#提前所有源文件(即：*.c文件)和所有中间文件(即：*.o)
SOURCE = $(wildcard ${SRC}/*.c)
OBJECT = $(patsubst %.c,${OBJ}/%.o,$(notdir ${SOURCE})) 

#设置最后目标文件
TARGET = code
BIN_TARGET = ${BIN}/${TARGET}
CFLAGS =  -g -Wall  -I${INC} 
CLIBSS = -L${LIB} -lisp -lm -lpthread

#用所有中间文件生成目的文件，规则中可以用 $^替换掉 ${OBJECT}
${BIN_TARGET}:${OBJECT}
	$(CC) $(CFLAGS) $(CLIBS) -o $@ ${OBJECT}

#生成各个中间文件
${OBJ}/%.o:${SRC}/%.c
	$(CC) $(CFLAGS) $(CLIBS) -o $@ -c $<

.PHONY:clean

#这个是find命令，不懂的可以查下资料
clean:
	find $(OBJ) -name *.o -exec rm -rf {} \;
	rm -rf $(BIN_TARGET)
